<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>test</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src= "jquery-3.4.1.js" ></script>
<script type="text/javascript" src= "./js/TAPtest.js" ></script>
<script type="text/javascript">
    window.onload=function(){
        var $checkbox01 = $(".ck01");//Simbad
        var $checkbox02 = $(".ck02");//GAVO
        var $checkbox03 = $(".ck03");//VizieR
        var $checkbox04 = $(".ck04");//CAOM

        $("#b01").click(function(){
            var checkstatus01 = false;
            if($checkbox01.prop("checked"))
            {
                checkstatus01 = true;
            }
            var data = jsonResultAll("http://simbad.u-strasbg.fr/simbad/sim-tap/sync",checkstatus01);
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
            /*
            var list_exist=[];
            var rootTable = readJson(data);
            var output = "";
            output += readJsonJoin(data,rootTable[0]);*/

            var rootTable = readJson(data);
            var output = /*"<h5>"+*/rootTable[0] /*+"</h5>"*/+" : "+ getDescription(data,rootTable[0])+"<br/>";
            var joinTable = readJsonJoinAll(data,rootTable[0]);
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] +" : "+ getDescription(data,joinTable[j])+ "<br/>";
                }
                output += "<br/>";
            for(var i = 1;i<rootTable.length;i++){
                var joinTable = readJsonJoinAll(data,rootTable[i]);
                output +=/*"<h5>"+*/rootTable[i] /*+"</h5>"*/+" : "+ getDescription(data,rootTable[i])+ "<br/>";
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] +" : "+ getDescription(data,joinTable[j])+ "<br/>";
                }
                output += "<br/>";
            }
            $("#load2").html(output);
        })
        /*
        $("#b02").click(function(){
            var data = jsonResultAll("http://simbad.u-strasbg.fr/simbad/sim-tap/sync", "otypes")
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
        })
        $("#b03").click(function(){
            var data = jsonResultAll("http://simbad.u-strasbg.fr/simbad/sim-tap/sync", "has_ref")
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
        })*/

        $("#b04").click(function(){
            var checkstatus02 = false;
            if($checkbox02.prop("checked"))
            {
                checkstatus02 = true;
            }
            var data = jsonResultAll("http://dc.zah.uni-heidelberg.de/tap/sync",checkstatus02)
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
            var rootTable = readJson(data);
            var output = rootTable[0] +"<br/>";
            var joinTable = readJsonJoin(data,rootTable[0]);
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] + "<br/>";
                }
                output += "<br/>";
            for(var i = 1;i<rootTable.length;i++){
                var joinTable = readJsonJoin(data,rootTable[i]);
                output +=rootTable[i] + "<br/>";
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] + "<br/>";
                }
                output += "<br/>";
            }
            $("#load2").html(output);
        })
        /*
        $("#b05").click(function(){
            var data = jsonResultAll("http://dc.zah.uni-heidelberg.de/tap/sync", "rr.capability")
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
        })
        */

        $("#b07").click(function(){
            var checkstatus03 = false;
            if($checkbox03.prop("checked"))
            {
                checkstatus03 = true;
            }
            var data = jsonResultAll("http://tapvizier.u-strasbg.fr/TAPVizieR/tap/sync",checkstatus03)
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
            var rootTable = readJson(data);
            var output = rootTable[0] +"<br/>";
            var joinTable = readJsonJoin(data,rootTable[0]);
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] + "<br/>";
                }
                output += "<br/>";
            for(var i = 1;i<rootTable.length;i++){
                var joinTable = readJsonJoin(data,rootTable[i]);
                output +=rootTable[i] + "<br/>";
                for(var j = 0;j<joinTable.length;j++)
                {
                    output+= "  " + joinTable[j] + "<br/>";
                }
                output += "<br/>";
            }
            $("#load2").html(output);
        })



        $("#b10").click(function(){
            var checkstatus04 = false;
            if($checkbox04.prop("checked"))
            {
                checkstatus04 = true;
            }
            var data = jsonResultAll("http://vao.stsci.edu/CAOMTAP/tapservice.aspx/sync",checkstatus04);
            $("#load1").html(
                JSON.stringify(data, undefined, 6)
            );
        })
    }
</script>
</head>
<body>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<div class="page-header" style="text-align: center">
    <h1>TAP TEST
        <small>Obas</small>
    </h1>
</div>
<div class="btn-group" style="padding-right:10px; padding-left:400px">
    <button type="button" class="btn btn-primary" >Simbad</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" >
        <span class="caret"></span>
        <span class="sr-only"></span>
    </button>
    <ul class="dropdown-menu" role="menu" style="margin-left:400px">
        <li><a href="#" id="b01">Show All</a></li>
        <li><a href="#" id="b02"></a></li>
        <li><a href="#" id="b03"></a></li>
        <li class="divider"></li>
        <li><a href="http://simbad.u-strasbg.fr/simbad/sim-tap">TAP Simbad</a></li>
    </ul>
</div>
<input type="checkbox" class = "ck01" >TOP 100

<div class="btn-group" style="padding-right:10px; padding-left:50px">
    <button type="button" class="btn btn-primary">GAVO</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
        <span class="sr-only"></span>
    </button>
    <ul class="dropdown-menu" role="menu" style="margin-left:50px">
        <li><a href="#" id="b04">Show All</a></li>
        <li><a href="#" id="b05"></a></li>
        <li><a href="#" id="b06"></a></li>
        <li class="divider"></li>
        <li><a href="http://dc.zah.uni-heidelberg.de/__system__/adql/query">TAP GAVO</a></li>
    </ul>
</div>
<input type="checkbox" class = "ck02" >TOP 100

<div class="btn-group" style="padding-right:10px; padding-left:50px">
    <button type="button" class="btn btn-primary">VizieR</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
        <span class="sr-only"></span>
    </button>
    <ul class="dropdown-menu" role="menu" style="margin-left:50px">
        <li><a href="#" id="b07">Show All</a></li>
        <li><a href="#" id="b08"></a></li>
        <li><a href="#" id="b09"></a></li>
        <li class="divider"></li>
        <li><a href="http://tapvizier.u-strasbg.fr/TAPVizieR/">TAP VizieR</a></li>
    </ul>
</div>
<input type="checkbox" class = "ck03" >TOP 100

<div class="btn-group" style="padding-right:10px; padding-left:50px">
    <button type="button" class="btn btn-primary">CAOM</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
        <span class="sr-only"></span>
    </button>
    <ul class="dropdown-menu" role="menu" style="margin-left:50px">
        <li><a href="#" id="b10">Show All</a></li>
        <li><a href="#" id="b11"></a></li>
        <li><a href="#" id="b12"></a></li>
        <li class="divider"></li>
        <li><a href="https://www.cadc-ccda.hia-iha.nrc-cnrc.gc.ca/tap/sync">TAP CAOM</a></li>
    </ul>
</div>
<input type="checkbox" class = "ck04" >TOP 100
<br></br>
<pre id="load1" style= "background-color:white; overflow:scroll; width:800px; height:300px;margin-left:400px"></pre>

<div class="btn-group" style="text-align: center; padding-left:750px">
    <button type="button" class="btn btn-primary">RootTable</button>
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
        <span class="sr-only"></span>
    </button>
    <ul class="dropdown-menu" role="menu" style="margin-left:750px">
        <li><a href="#" id="b13"></a></li>
        <li><a href="#" id="b14"></a></li>
        <li><a href="#" id="b15"></a></li>
        <li class="divider"></li>
        <li><a href="http://dc.zah.uni-heidelberg.de/__system__/adql/query"></a></li>
    </ul>
</div>
<br></br>
<pre id="load2" style= "background-color:white; overflow:scroll; width:800px; height:700px;margin-left:400px"></pre>
</body>
</html>